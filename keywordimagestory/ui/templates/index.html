{% extends 'base.html' %}

{% block content %}
<section>
  <hgroup>
    <h1>Keyword Image Story Studio</h1>
    <p>키워드 기반 스토리 생성 · 자막/음성/장면 동시 편집 · 템플릿 & 효과 적용</p>
  </hgroup>
  <p>
    <a href="{{ url_for('tools_ui') }}" class="secondary">프롬프트 도구 모음 페이지 →</a>
  </p>
  <form id="project-form">
    <div class="grid">
      <label>
        선택한 툴 결과
        <select id="tool-selection" name="tool_selection">
          <option value="">선택하세요</option>
          <option value="story_keywords">스토리 키워드</option>
          <option value="image_story">이미지 스토리</option>
          <option value="shorts_script">쇼츠 대본 & 이미지</option>
          <option value="shorts_scenes">쇼츠 대본 & 영상</option>
        </select>
      </label>
      <label>
        저장된 결과 선택
        <select id="record-selection" name="record_selection" disabled>
          <option value="">저장된 결과를 먼저 로드하세요</option>
        </select>
      </label>
    </div>
    <button type="submit" class="contrast">선택 프로젝트 생성</button>
  </form>
</section>

<section id="project-state">
  <div class="placeholder">
    <p>프로젝트를 생성하면 여기에서 모든 상태를 확인할 수 있습니다.</p>
  </div>
</section>

<section>
  <details open>
    <summary>최근 작업 내역</summary>
    <table id="project-history-table">
      <thead>
        <tr><th>프로젝트</th><th>버전</th><th>설명</th><th>시간</th><th>삭제</th></tr>
      </thead>
      <tbody>
        {% for item in history %}
        <tr data-project-id="{{ item.project_id }}" data-version="{{ item.version }}" title="클릭하여 프로젝트를 다시 열기">
          <td>{{ item.project_id }}</td>
          <td>{{ item.version }}</td>
          <td>{{ item.summary }}</td>
          <td>{{ item.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</td>
          <td><button type="button" class="outline" data-delete-history>삭제</button></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </details>
</section>
{% endblock %}
