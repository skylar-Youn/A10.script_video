<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VMaker - 자막 기반 비디오 편집기</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🎬 VMaker</h1>
            <p>자막 기반 비디오 편집 프로토타입</p>
        </header>

        <main>
            <!-- 파일 업로드 섹션 -->
            <section class="upload-section">
                <div class="upload-box">
                    <h3>📹 비디오 업로드</h3>
                    <input type="file" id="videoFile" accept="video/*">
                    <p class="upload-hint">파일을 선택하면 자동으로 업로드됩니다</p>
                </div>
                <div class="upload-box">
                    <h3>📝 자막 업로드 (SRT)</h3>
                    <input type="file" id="subtitleFile" accept=".srt">
                    <p class="upload-hint">파일을 선택하면 자동으로 업로드됩니다</p>
                </div>
                <div class="upload-box">
                    <h3>🖼️ 이미지 업로드</h3>
                    <input type="file" id="imageFile" accept="image/*">
                    <p class="upload-hint">파일을 선택하면 자동으로 업로드됩니다</p>
                </div>
            </section>

            <!-- 상태 표시 -->
            <div id="status" class="status"></div>

            <!-- 비디오 플레이어 -->
            <section class="player-section" id="playerSection" style="display: none;">
                <div class="player-header">
                    <h3>비디오 미리보기</h3>
                    <div class="player-controls-group">
                        <div class="aspect-ratio-controls">
                            <button onclick="setAspectRatio('youtube')" class="btn btn-secondary aspect-btn active" id="btnYoutube">
                                📺 유튜브 (16:9)
                            </button>
                            <button onclick="setAspectRatio('shorts')" class="btn btn-secondary aspect-btn" id="btnShorts">
                                📱 쇼츠 (9:16)
                            </button>
                        </div>
                        <div class="size-controls">
                            <label for="sizeSlider" class="size-label">
                                📐 크기: <span id="sizeValue">50</span>%
                            </label>
                            <input type="range" id="sizeSlider" class="size-slider"
                                   min="25" max="100" value="50" step="5"
                                   oninput="setVideoSizeSlider(this.value)">
                        </div>
                    </div>
                </div>
                <div class="video-container" id="videoContainer" data-aspect="youtube">
                    <video id="videoPlayer" controls width="100%"></video>
                    <div id="coverBox" class="cover-box"></div>
                    <div id="topBar" class="letterbox-bar top-bar"></div>
                    <div id="bottomBar" class="letterbox-bar bottom-bar"></div>
                    <div id="imageOverlayContainer" class="image-overlay-container"></div>
                    <div id="titleOverlay" class="title-overlay"></div>
                    <div id="subtitleOverlay" class="subtitle-overlay"></div>
                </div>
                <div class="player-info">
                    <span id="currentTime">00:00</span> / <span id="duration">00:00</span>
                </div>

                <!-- 글자 가림 박스 설정 -->
                <div class="subtitle-effects-panel" style="margin-bottom: 20px;">
                    <div class="panel-header">
                        <h4>🔲 글자 가림 박스</h4>
                        <button onclick="togglePanel('coverBoxPanel')" class="btn btn-secondary toggle-btn" id="coverBoxToggle">
                            ▼ 숨기기
                        </button>
                    </div>

                    <div class="panel-content" id="coverBoxPanel">
                    <div class="effect-control">
                        <label>
                            <input type="checkbox" id="coverBoxEnabled" onchange="updateCoverBox()">
                            글자 가림 박스 표시
                        </label>
                    </div>

                    <div class="effects-grid">
                        <div class="effect-section">
                            <h5>위치 (좌상단)</h5>

                            <div class="effect-control">
                                <label>X 위치 (%)</label>
                                <input type="range" id="coverBoxLeft" min="0" max="100" value="10" onchange="updateCoverBox()">
                                <span id="coverBoxLeftValue">10%</span>
                            </div>

                            <div class="effect-control">
                                <label>Y 위치 (%)</label>
                                <input type="range" id="coverBoxTop" min="0" max="100" value="10" onchange="updateCoverBox()">
                                <span id="coverBoxTopValue">10%</span>
                            </div>
                        </div>

                        <div class="effect-section">
                            <h5>크기 및 투명도</h5>

                            <div class="effect-control">
                                <label>너비 (%)</label>
                                <input type="range" id="coverBoxWidth" min="5" max="50" value="20" onchange="updateCoverBox()">
                                <span id="coverBoxWidthValue">20%</span>
                            </div>

                            <div class="effect-control">
                                <label>높이 (%)</label>
                                <input type="range" id="coverBoxHeight" min="5" max="50" value="15" onchange="updateCoverBox()">
                                <span id="coverBoxHeightValue">15%</span>
                            </div>

                            <div class="effect-control">
                                <label>투명도</label>
                                <input type="range" id="coverBoxOpacity" min="0" max="100" value="90" onchange="updateCoverBox()">
                                <span id="coverBoxOpacityValue">90%</span>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>

                <!-- 레터박스 설정 -->
                <div class="subtitle-effects-panel" style="margin-bottom: 20px;">
                    <div class="panel-header">
                        <h4>🎬 레터박스 (상단/하단 배경)</h4>
                        <button onclick="togglePanel('letterboxPanel')" class="btn btn-secondary toggle-btn" id="letterboxToggle">
                            ▼ 숨기기
                        </button>
                    </div>

                    <div class="panel-content" id="letterboxPanel">
                    <div class="effects-grid">
                        <div class="effect-section">
                            <h5>상단 배경</h5>

                            <div class="effect-control">
                                <label>
                                    <input type="checkbox" id="topBarEnabled" onchange="updateLetterbox()">
                                    상단 배경 표시
                                </label>
                            </div>

                            <div class="effect-control">
                                <label>높이 (픽셀)</label>
                                <input type="range" id="topBarHeight" min="0" max="200" value="80" onchange="updateLetterbox()">
                                <span id="topBarHeightValue">80px</span>
                            </div>

                            <div class="effect-control">
                                <label>투명도</label>
                                <input type="range" id="topBarOpacity" min="0" max="100" value="80" onchange="updateLetterbox()">
                                <span id="topBarOpacityValue">80%</span>
                            </div>
                        </div>

                        <div class="effect-section">
                            <h5>하단 배경</h5>

                            <div class="effect-control">
                                <label>
                                    <input type="checkbox" id="bottomBarEnabled" onchange="updateLetterbox()">
                                    하단 배경 표시
                                </label>
                            </div>

                            <div class="effect-control">
                                <label>높이 (픽셀)</label>
                                <input type="range" id="bottomBarHeight" min="0" max="200" value="80" onchange="updateLetterbox()">
                                <span id="bottomBarHeightValue">80px</span>
                            </div>

                            <div class="effect-control">
                                <label>투명도</label>
                                <input type="range" id="bottomBarOpacity" min="0" max="100" value="80" onchange="updateLetterbox()">
                                <span id="bottomBarOpacityValue">80%</span>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>

                <!-- 제목 설정 -->
                <div class="subtitle-effects-panel" style="margin-bottom: 20px;">
                    <div class="panel-header">
                        <h4>📌 제목 설정</h4>
                        <button onclick="togglePanel('titlePanel')" class="btn btn-secondary toggle-btn" id="titleToggle">
                            ▼ 숨기기
                        </button>
                    </div>

                    <div class="panel-content" id="titlePanel">

                    <div class="effect-control" style="margin-bottom: 15px;">
                        <label>제목 텍스트 (2줄 가능)</label>
                        <textarea id="videoTitle" placeholder="제목을 입력하세요 (줄바꿈: Enter)"
                               oninput="updateTitle()" rows="2"
                               style="width: 100%; padding: 10px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 1em; resize: vertical; font-family: inherit;"></textarea>
                    </div>

                    <div class="effects-grid">
                        <div class="effect-section">
                            <h5>제목 스타일</h5>

                            <div class="effect-control">
                                <label>글꼴 크기</label>
                                <select id="titleFontSize" onchange="updateTitle()">
                                    <option value="1.5em">작게</option>
                                    <option value="2em" selected>보통</option>
                                    <option value="2.5em">크게</option>
                                    <option value="3em">매우 크게</option>
                                </select>
                            </div>

                            <div class="effect-control">
                                <label>글꼴 색상</label>
                                <input type="color" id="titleColor" value="#ffffff" onchange="updateTitle()">
                            </div>

                            <div class="effect-control">
                                <label>배경색</label>
                                <input type="color" id="titleBgColor" value="#667eea" onchange="updateTitle()">
                                <input type="range" id="titleBgOpacity" min="0" max="100" value="90" onchange="updateTitle()">
                                <span id="titleBgOpacityValue">90%</span>
                            </div>
                        </div>

                        <div class="effect-section">
                            <h5>정적 효과</h5>

                            <div class="effect-control">
                                <label>테두리 스타일</label>
                                <select id="titleBorderStyle" onchange="updateTitle()">
                                    <option value="none" selected>없음</option>
                                    <option value="solid">단선</option>
                                    <option value="dashed">대시선</option>
                                    <option value="dotted">점선</option>
                                    <option value="double">이중선</option>
                                </select>
                            </div>

                            <div class="effect-control">
                                <label>테두리 두께</label>
                                <input type="range" id="titleBorderWidth" min="0" max="10" value="0" onchange="updateTitle()">
                                <span id="titleBorderWidthValue">0px</span>
                            </div>

                            <div class="effect-control">
                                <label>테두리 색상</label>
                                <input type="color" id="titleBorderColor" value="#ffffff" onchange="updateTitle()">
                            </div>

                            <div class="effect-control">
                                <label>둥근 모서리</label>
                                <input type="range" id="titleBorderRadius" min="0" max="50" value="8" onchange="updateTitle()">
                                <span id="titleBorderRadiusValue">8px</span>
                            </div>

                            <div class="effect-control">
                                <label>그림자</label>
                                <select id="titleShadow" onchange="updateTitle()">
                                    <option value="none">없음</option>
                                    <option value="2px 2px 4px rgba(0,0,0,0.9)" selected>기본</option>
                                    <option value="3px 3px 8px rgba(0,0,0,1)">진하게</option>
                                    <option value="0 0 15px rgba(255,255,255,0.8)">빛나는</option>
                                    <option value="0 0 20px rgba(255,255,0,0.8)">노란빛</option>
                                </select>
                            </div>
                        </div>

                        <div class="effect-section">
                            <h5>위치 및 동적 효과</h5>

                            <div class="effect-control">
                                <label>표시 위치</label>
                                <select id="titlePosition" onchange="updateTitle()">
                                    <option value="top" selected>상단</option>
                                    <option value="center">중앙</option>
                                    <option value="bottom">하단</option>
                                </select>
                            </div>

                            <div class="effect-control">
                                <label>애니메이션</label>
                                <select id="titleAnimation" onchange="updateTitle()">
                                    <option value="none" selected>없음</option>
                                    <option value="fade-in">페이드인</option>
                                    <option value="slide-down">슬라이드 (위→아래)</option>
                                    <option value="slide-up">슬라이드 (아래→위)</option>
                                    <option value="slide-right">슬라이드 (좌→우)</option>
                                    <option value="slide-left">슬라이드 (우→좌)</option>
                                    <option value="zoom-in">줌인</option>
                                    <option value="zoom-out">줌아웃</option>
                                    <option value="bounce">바운스</option>
                                    <optgroup label="🔄 반복 애니메이션">
                                        <option value="fade-in-out">페이드 인/아웃 반복</option>
                                        <option value="slide-up-down">슬라이드 위↔아래 반복</option>
                                        <option value="slide-left-right">슬라이드 좌↔우 반복</option>
                                        <option value="zoom-in-out">줌인↔줌아웃 반복</option>
                                    </optgroup>
                                </select>
                            </div>

                            <div class="effect-control">
                                <label>애니메이션 속도</label>
                                <select id="titleAnimationSpeed" onchange="updateTitle()">
                                    <option value="0.3s">빠르게</option>
                                    <option value="0.5s" selected>보통</option>
                                    <option value="0.8s">느리게</option>
                                    <option value="1.2s">매우 느리게</option>
                                </select>
                            </div>

                            <div class="effect-control">
                                <button onclick="clearTitle()" class="btn btn-secondary">제목 지우기</button>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>

                <!-- 자막 효과 설정 -->
                <div class="subtitle-effects-panel">
                    <div class="panel-header">
                        <h4>🎨 자막 효과 설정</h4>
                        <button onclick="togglePanel('subtitleEffectsPanel')" class="btn btn-secondary toggle-btn" id="subtitleEffectsToggle">
                            ▼ 숨기기
                        </button>
                    </div>

                    <div class="panel-content" id="subtitleEffectsPanel">
                    <div class="effects-grid">
                        <!-- 정적 효과 -->
                        <div class="effect-section">
                            <h5>정적 효과</h5>

                            <div class="effect-control">
                                <label>글꼴 크기</label>
                                <select id="fontSize" onchange="updateSubtitleStyle()">
                                    <option value="1em">작게</option>
                                    <option value="1.5em" selected>보통</option>
                                    <option value="2em">크게</option>
                                    <option value="2.5em">매우 크게</option>
                                    <option value="3em">거대</option>
                                </select>
                            </div>

                            <div class="effect-control">
                                <label>글꼴 색상</label>
                                <input type="color" id="fontColor" value="#ffffff" onchange="updateSubtitleStyle()">
                            </div>

                            <div class="effect-control">
                                <label>배경색</label>
                                <input type="color" id="bgColor" value="#000000" onchange="updateSubtitleStyle()">
                                <input type="range" id="bgOpacity" min="0" max="100" value="80" onchange="updateSubtitleStyle()">
                                <span id="bgOpacityValue">80%</span>
                            </div>

                            <div class="effect-control">
                                <label>테두리</label>
                                <select id="borderStyle" onchange="updateSubtitleStyle()">
                                    <option value="none">없음</option>
                                    <option value="2px solid white">흰색 테두리</option>
                                    <option value="2px solid black">검정 테두리</option>
                                    <option value="3px double white">이중 테두리</option>
                                    <option value="2px dashed yellow">노란 점선</option>
                                </select>
                            </div>

                            <div class="effect-control">
                                <label>그림자</label>
                                <select id="textShadow" onchange="updateSubtitleStyle()">
                                    <option value="none">없음</option>
                                    <option value="2px 2px 4px rgba(0,0,0,0.9)" selected>기본</option>
                                    <option value="3px 3px 6px rgba(0,0,0,1)">진하게</option>
                                    <option value="0 0 10px rgba(255,255,255,0.8)">빛나는</option>
                                    <option value="5px 5px 0 rgba(0,0,0,0.5)">3D</option>
                                </select>
                            </div>
                        </div>

                        <!-- 동적 효과 -->
                        <div class="effect-section">
                            <h5>동적 효과</h5>

                            <div class="effect-control">
                                <label>애니메이션</label>
                                <select id="animation" onchange="updateSubtitleStyle()">
                                    <option value="none">없음</option>
                                    <option value="fadeIn">페이드 인</option>
                                    <option value="slideUp">슬라이드 업</option>
                                    <option value="slideDown">슬라이드 다운</option>
                                    <option value="zoomIn">확대</option>
                                    <option value="bounce">바운스</option>
                                    <optgroup label="🔄 반복 애니메이션">
                                        <option value="fadeInOut">페이드 인/아웃 반복</option>
                                        <option value="slideUpDown">슬라이드 위↔아래 반복</option>
                                        <option value="slideLeftRight">슬라이드 좌↔우 반복</option>
                                        <option value="zoomInOut">줌인↔줌아웃 반복</option>
                                    </optgroup>
                                </select>
                            </div>

                            <div class="effect-control">
                                <label>속도</label>
                                <select id="animationSpeed" onchange="updateSubtitleStyle()">
                                    <option value="0.3s">빠르게</option>
                                    <option value="0.5s" selected>보통</option>
                                    <option value="1s">느리게</option>
                                </select>
                            </div>

                            <div class="effect-control">
                                <button onclick="resetSubtitleEffects()" class="btn btn-secondary">효과 초기화</button>
                            </div>
                        </div>

                        <!-- 고급 텍스트 효과 -->
                        <div class="effect-section">
                            <h5>🌟 고급 텍스트 효과</h5>

                            <div class="effect-control">
                                <label>텍스트 아웃라인</label>
                                <input type="range" id="textStroke" min="0" max="10" value="0" onchange="updateSubtitleStyle()">
                                <span id="textStrokeValue">0px</span>
                            </div>

                            <div class="effect-control">
                                <label>아웃라인 색상</label>
                                <input type="color" id="textStrokeColor" value="#000000" onchange="updateSubtitleStyle()">
                            </div>

                            <div class="effect-control">
                                <label>글로우 효과</label>
                                <select id="glowEffect" onchange="updateSubtitleStyle()">
                                    <option value="none">없음</option>
                                    <option value="soft">부드러운 글로우</option>
                                    <option value="medium">중간 글로우</option>
                                    <option value="strong">강한 글로우</option>
                                    <option value="neon">네온 효과</option>
                                </select>
                            </div>

                            <div class="effect-control">
                                <label>
                                    <input type="checkbox" id="gradientEnabled" onchange="updateSubtitleStyle()">
                                    그라데이션 텍스트
                                </label>
                            </div>

                            <div class="effect-control">
                                <label>그라데이션 색상 1</label>
                                <input type="color" id="gradientColor1" value="#ff6b6b" onchange="updateSubtitleStyle()">
                            </div>

                            <div class="effect-control">
                                <label>그라데이션 색상 2</label>
                                <input type="color" id="gradientColor2" value="#4ecdc4" onchange="updateSubtitleStyle()">
                            </div>

                            <div class="effect-control">
                                <label>그라데이션 각도</label>
                                <input type="range" id="gradientAngle" min="0" max="360" value="90" onchange="updateSubtitleStyle()">
                                <span id="gradientAngleValue">90°</span>
                            </div>

                            <div class="effect-control">
                                <label>글자별 애니메이션</label>
                                <select id="letterAnimation" onchange="updateSubtitleStyle()">
                                    <option value="none">없음</option>
                                    <option value="wave">웨이브</option>
                                    <option value="bounce">바운스</option>
                                    <option value="flip">플립</option>
                                </select>
                            </div>

                            <div class="effect-control">
                                <label>텍스트 변형</label>
                                <select id="textTransform" onchange="updateSubtitleStyle()">
                                    <option value="none">없음</option>
                                    <option value="uppercase">대문자</option>
                                    <option value="lowercase">소문자</option>
                                    <option value="capitalize">첫글자 대문자</option>
                                </select>
                            </div>

                            <div class="effect-control">
                                <label>자간 (Letter Spacing)</label>
                                <input type="range" id="letterSpacing" min="-5" max="20" value="0" onchange="updateSubtitleStyle()">
                                <span id="letterSpacingValue">0px</span>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>

                <!-- 비디오/이미지 효과 설정 -->
                <div class="subtitle-effects-panel" style="margin-top: 20px;">
                    <div class="panel-header">
                        <h4>🎨 비디오/이미지 효과</h4>
                        <button onclick="togglePanel('videoEffectsPanel')" class="btn btn-secondary toggle-btn" id="videoEffectsToggle">
                            ▼ 숨기기
                        </button>
                    </div>

                    <div class="panel-content" id="videoEffectsPanel">
                    <div class="effects-grid">
                        <!-- 색상 조정 효과 -->
                        <div class="effect-section">
                            <h5>색상 조정</h5>

                            <div class="effect-control">
                                <label>밝기 (Brightness)</label>
                                <input type="range" id="videoBrightness" min="0" max="200" value="100" onchange="updateVideoEffects()">
                                <span id="videoBrightnessValue">100%</span>
                            </div>

                            <div class="effect-control">
                                <label>대비 (Contrast)</label>
                                <input type="range" id="videoContrast" min="0" max="200" value="100" onchange="updateVideoEffects()">
                                <span id="videoContrastValue">100%</span>
                            </div>

                            <div class="effect-control">
                                <label>채도 (Saturate)</label>
                                <input type="range" id="videoSaturate" min="0" max="200" value="100" onchange="updateVideoEffects()">
                                <span id="videoSaturateValue">100%</span>
                            </div>

                            <div class="effect-control">
                                <label>색조 회전 (Hue Rotate)</label>
                                <input type="range" id="videoHueRotate" min="0" max="360" value="0" onchange="updateVideoEffects()">
                                <span id="videoHueRotateValue">0°</span>
                            </div>
                        </div>

                        <!-- 스타일 효과 -->
                        <div class="effect-section">
                            <h5>스타일 효과</h5>

                            <div class="effect-control">
                                <label>블러 (Blur)</label>
                                <input type="range" id="videoBlur" min="0" max="10" value="0" onchange="updateVideoEffects()">
                                <span id="videoBlurValue">0px</span>
                            </div>

                            <div class="effect-control">
                                <label>흑백 (Grayscale)</label>
                                <input type="range" id="videoGrayscale" min="0" max="100" value="0" onchange="updateVideoEffects()">
                                <span id="videoGrayscaleValue">0%</span>
                            </div>

                            <div class="effect-control">
                                <label>세피아 (Sepia)</label>
                                <input type="range" id="videoSepia" min="0" max="100" value="0" onchange="updateVideoEffects()">
                                <span id="videoSepiaValue">0%</span>
                            </div>

                            <div class="effect-control">
                                <label>반전 (Invert)</label>
                                <input type="range" id="videoInvert" min="0" max="100" value="0" onchange="updateVideoEffects()">
                                <span id="videoInvertValue">0%</span>
                            </div>

                            <div class="effect-control">
                                <button onclick="resetVideoEffects()" class="btn btn-secondary">효과 초기화</button>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>

                <!-- 이미지 오버레이 설정 -->
                <div class="subtitle-effects-panel" style="margin-top: 20px;">
                    <div class="panel-header">
                        <h4>🖼️ 이미지 오버레이</h4>
                        <button onclick="togglePanel('imagePanel')" class="btn btn-secondary toggle-btn" id="imageToggle">
                            ▼ 숨기기
                        </button>
                    </div>

                    <div class="panel-content" id="imagePanel">

                    <!-- 이미지 목록 -->
                    <div style="margin-bottom: 20px;">
                        <h5 style="margin-bottom: 10px; color: #495057;">📋 업로드된 이미지</h5>
                        <div id="imageList" class="image-list"></div>
                    </div>

                    <div class="effects-grid">
                        <!-- 위치 및 크기 -->
                        <div class="effect-section">
                            <h5>위치 및 크기</h5>

                            <div class="effect-control">
                                <label>X 위치 (%)</label>
                                <input type="range" id="imageLeft" min="0" max="100" value="50" onchange="updateImageSettings()">
                                <span id="imageLeftValue">50%</span>
                            </div>

                            <div class="effect-control">
                                <label>Y 위치 (%)</label>
                                <input type="range" id="imageTop" min="0" max="100" value="50" onchange="updateImageSettings()">
                                <span id="imageTopValue">50%</span>
                            </div>

                            <div class="effect-control">
                                <label>너비 (%)</label>
                                <input type="range" id="imageWidth" min="5" max="100" value="30" onchange="updateImageSettings()">
                                <span id="imageWidthValue">30%</span>
                            </div>

                            <div class="effect-control">
                                <label>높이 (%)</label>
                                <input type="range" id="imageHeight" min="5" max="100" value="30" onchange="updateImageSettings()">
                                <span id="imageHeightValue">30%</span>
                            </div>

                            <div class="effect-control">
                                <label>회전 (도)</label>
                                <input type="range" id="imageRotation" min="0" max="360" value="0" onchange="updateImageSettings()">
                                <span id="imageRotationValue">0°</span>
                            </div>

                            <div class="effect-control">
                                <label>투명도</label>
                                <input type="range" id="imageOpacity" min="0" max="100" value="100" onchange="updateImageSettings()">
                                <span id="imageOpacityValue">100%</span>
                            </div>

                            <!-- 빠른 크기 조정 -->
                            <div class="effect-control" style="margin-top: 20px;">
                                <label style="display: block; margin-bottom: 10px; font-weight: bold;">⚡ 빠른 크기 조정</label>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                                    <button onclick="setImagePreset('fill')" class="btn btn-secondary" style="padding: 8px 12px; font-size: 0.9em;">
                                        📐 화면 채우기
                                    </button>
                                    <button onclick="setImagePreset('center')" class="btn btn-secondary" style="padding: 8px 12px; font-size: 0.9em;">
                                        🎯 중앙 정렬
                                    </button>
                                    <button onclick="setImagePreset('half')" class="btn btn-secondary" style="padding: 8px 12px; font-size: 0.9em;">
                                        📏 절반 크기
                                    </button>
                                    <button onclick="setImagePreset('quarter')" class="btn btn-secondary" style="padding: 8px 12px; font-size: 0.9em;">
                                        📦 1/4 크기
                                    </button>
                                    <button onclick="setImagePreset('top-left')" class="btn btn-secondary" style="padding: 8px 12px; font-size: 0.9em;">
                                        ↖️ 좌상단
                                    </button>
                                    <button onclick="setImagePreset('top-right')" class="btn btn-secondary" style="padding: 8px 12px; font-size: 0.9em;">
                                        ↗️ 우상단
                                    </button>
                                    <button onclick="setImagePreset('bottom-left')" class="btn btn-secondary" style="padding: 8px 12px; font-size: 0.9em;">
                                        ↙️ 좌하단
                                    </button>
                                    <button onclick="setImagePreset('bottom-right')" class="btn btn-secondary" style="padding: 8px 12px; font-size: 0.9em;">
                                        ↘️ 우하단
                                    </button>
                                </div>
                            </div>

                            <!-- 종횡비 유지 옵션 -->
                            <div class="effect-control" style="margin-top: 15px;">
                                <label>
                                    <input type="checkbox" id="maintainAspectRatio" onchange="toggleAspectRatio()">
                                    종횡비 유지 (너비/높이 비율 고정)
                                </label>
                            </div>
                        </div>

                        <!-- 애니메이션 -->
                        <div class="effect-section">
                            <h5>애니메이션</h5>

                            <div class="effect-control">
                                <label>애니메이션</label>
                                <select id="imageAnimation" onchange="updateImageSettings()">
                                    <option value="none" selected>없음</option>
                                    <optgroup label="🎬 등장 효과">
                                        <option value="fade-in">페이드 인</option>
                                        <option value="slide-in-up">슬라이드 인 (위↓)</option>
                                        <option value="slide-in-down">슬라이드 인 (아래↑)</option>
                                        <option value="slide-in-left">슬라이드 인 (좌→)</option>
                                        <option value="slide-in-right">슬라이드 인 (우←)</option>
                                        <option value="zoom-in">줌 인</option>
                                        <option value="bounce-in">바운스 인</option>
                                    </optgroup>
                                    <optgroup label="🎭 퇴장 효과">
                                        <option value="fade-out">페이드 아웃</option>
                                        <option value="slide-out-up">슬라이드 아웃 (위↑)</option>
                                        <option value="slide-out-down">슬라이드 아웃 (아래↓)</option>
                                        <option value="slide-out-left">슬라이드 아웃 (좌←)</option>
                                        <option value="slide-out-right">슬라이드 아웃 (우→)</option>
                                        <option value="zoom-out">줌 아웃</option>
                                    </optgroup>
                                    <optgroup label="✨ 강조 효과">
                                        <option value="pulse">펄스</option>
                                        <option value="shake">흔들기</option>
                                        <option value="swing">흔들흔들</option>
                                        <option value="tada">타다!</option>
                                    </optgroup>
                                    <optgroup label="🔄 반복 애니메이션">
                                        <option value="fade-loop">페이드 반복</option>
                                        <option value="bounce-loop">바운스 반복</option>
                                        <option value="rotate-loop">회전 반복</option>
                                    </optgroup>
                                </select>
                            </div>

                            <div class="effect-control">
                                <label>애니메이션 속도</label>
                                <select id="imageAnimationSpeed" onchange="updateImageSettings()">
                                    <option value="0.3s">빠르게</option>
                                    <option value="0.5s" selected>보통</option>
                                    <option value="1s">느리게</option>
                                    <option value="2s">매우 느리게</option>
                                </select>
                            </div>
                        </div>

                        <!-- 필터 효과 (색상) -->
                        <div class="effect-section">
                            <h5>필터 - 색상</h5>

                            <div class="effect-control">
                                <label>밝기</label>
                                <input type="range" id="imageBrightness" min="0" max="200" value="100" onchange="updateImageEffects()">
                                <span id="imageBrightnessValue">100%</span>
                            </div>

                            <div class="effect-control">
                                <label>대비</label>
                                <input type="range" id="imageContrast" min="0" max="200" value="100" onchange="updateImageEffects()">
                                <span id="imageContrastValue">100%</span>
                            </div>

                            <div class="effect-control">
                                <label>채도</label>
                                <input type="range" id="imageSaturate" min="0" max="200" value="100" onchange="updateImageEffects()">
                                <span id="imageSaturateValue">100%</span>
                            </div>

                            <div class="effect-control">
                                <label>색조 회전</label>
                                <input type="range" id="imageHueRotate" min="0" max="360" value="0" onchange="updateImageEffects()">
                                <span id="imageHueRotateValue">0°</span>
                            </div>
                        </div>

                        <!-- 필터 효과 (스타일) -->
                        <div class="effect-section">
                            <h5>필터 - 스타일</h5>

                            <div class="effect-control">
                                <label>블러</label>
                                <input type="range" id="imageBlur" min="0" max="10" value="0" onchange="updateImageEffects()">
                                <span id="imageBlurValue">0px</span>
                            </div>

                            <div class="effect-control">
                                <label>흑백</label>
                                <input type="range" id="imageGrayscale" min="0" max="100" value="0" onchange="updateImageEffects()">
                                <span id="imageGrayscaleValue">0%</span>
                            </div>

                            <div class="effect-control">
                                <label>세피아</label>
                                <input type="range" id="imageSepia" min="0" max="100" value="0" onchange="updateImageEffects()">
                                <span id="imageSepiaValue">0%</span>
                            </div>

                            <div class="effect-control">
                                <label>반전</label>
                                <input type="range" id="imageInvert" min="0" max="100" value="0" onchange="updateImageEffects()">
                                <span id="imageInvertValue">0%</span>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
            </section>

            <!-- 타임라인 -->
            <section class="timeline-section" id="timelineSection" style="display: none;">
                <div class="timeline-header">
                    <h3>타임라인 (자막 기반)</h3>
                    <div class="timeline-controls">
                        <button onclick="selectAll()" class="btn btn-secondary">전체 선택</button>
                        <button onclick="deselectAll()" class="btn btn-secondary">전체 해제</button>
                        <button onclick="invertSelection()" class="btn btn-secondary">선택 반전</button>
                        <button onclick="mergeSelectedSubtitles()" class="btn btn-secondary">🔗 행 합치기</button>
                        <button onclick="downloadEditedSubtitles()" class="btn btn-primary">💾 수정된 자막 다운로드</button>
                        <button onclick="renderVideo()" class="btn btn-success">✂️ 선택된 구간으로 렌더링</button>
                    </div>
                </div>

                <div id="timeline" class="timeline">
                    <!-- 자막 블록들이 여기에 동적으로 추가됩니다 -->
                </div>

                <div class="timeline-info">
                    <span>총 자막: <span id="totalSubtitles">0</span>개</span>
                    <span>선택됨: <span id="selectedCount">0</span>개</span>
                    <span>예상 길이: <span id="estimatedDuration">00:00</span></span>
                </div>
            </section>

            <!-- 렌더링 진행 상태 -->
            <section class="render-section" id="renderSection" style="display: none;">
                <h3>렌더링 진행 중...</h3>
                <div class="progress-bar">
                    <div id="progressBar" class="progress"></div>
                </div>
                <p id="renderStatus">자막 구간 분할 중...</p>
            </section>

            <!-- 다운로드 섹션 -->
            <section class="download-section" id="downloadSection" style="display: none;">
                <h3>✅ 렌더링 완료!</h3>
                <button onclick="downloadVideo()" class="btn btn-success btn-large">💾 편집된 비디오 다운로드</button>
                <div class="video-container">
                    <video id="resultPlayer" controls width="100%"></video>
                </div>
            </section>
        </main>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
